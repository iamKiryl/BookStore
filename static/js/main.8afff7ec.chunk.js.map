{"version":3,"sources":["components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","actions/index.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","components/book-list/book-list.js","components/book-list/index.js","utils/compose.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","sevices/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["BookListItem","book","onAddedToCart","title","author","price","coverImage","className","src","alt","onClick","Spinner","ErrorIndicator","booksLoaded","newBooks","type","payload","booksError","error","bookAddedToCart","bookId","fetchBooks","bookstoreService","dispatch","getBooks","then","data","catch","err","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","BookList","books","map","key","id","BookListContainer","this","loading","Component","funcs","comp","reduceRight","weapped","f","compose","connect","bookList","bindActionCreators","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","shoppingCart","items","cartItems","total","orderTotal","summ","i","length","console","log","count","item","idx","HomePage","CartPage","ShopHeader","sumItems","to","App","role","path","component","exact","ErrorBoundry","state","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","updateBookList","action","undefined","updateCartItems","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.8afff7ec.chunk.js","sourcesContent":["import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;","import React from 'react';\r\nimport './book-list-item.css';\r\n\r\nconst BookListItem = ({book, onAddedToCart }) => {\r\n    const {title, author, price, coverImage} = book;\r\n    return (\r\n        <div className='book-list-item'>\r\n            <div className='book-cover'>\r\n                <img src={coverImage} alt='cover'/>\r\n            </div>\r\n            <div className='book-details'>\r\n                <span className='book-title'>{title}</span>\r\n                <div className='book-author'>{author}</div>\r\n                <div className='book-price'>${price}</div>\r\n                <button \r\n                onClick={onAddedToCart}\r\n                className='btn btn-info add-to-cart'>Add to cart</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BookListItem;","import Spinner from './spinner';\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport './spinner.css';\r\n\r\nconst Spinner = () => {\r\n    return <div>Loading...</div>\r\n}\r\n\r\nexport default Spinner;","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n    return <div>Error!</div>\r\n};\r\n\r\nexport default ErrorIndicator;","const booksRequested = () => {\r\n    return {\r\n        type: 'FETCH_BOOKS_REQUEST'\r\n    }\r\n};\r\n\r\nconst booksLoaded = ( newBooks ) => {\r\n return {\r\n     type: 'FETCH_BOOKS_SUCCESS',\r\n     payload: newBooks\r\n }\r\n};\r\n\r\nconst booksError = (error) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_FAILURE',\r\n        payload: error\r\n    }\r\n};\r\n\r\nconst bookAddedToCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_ADDED_TO_CART',\r\n        payload: bookId\r\n    }\r\n}\r\n\r\nconst bookRemovedFromCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_REMOVED_FROM_CART',\r\n        payload: bookId\r\n    }\r\n}\r\n\r\nconst allBooksRemovedFromCart = (bookId) => {\r\n    return {\r\n        type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n        payload: bookId\r\n    }\r\n}\r\n\r\nconst fetchBooksOld = (bookstoreService, dispatch) => () => {\r\n    dispatch(booksRequested());\r\n    bookstoreService.getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err))) \r\n}\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n    dispatch(booksRequested());\r\n    bookstoreService.getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err))) \r\n}\r\n\r\nexport {\r\n    fetchBooks,\r\n    bookAddedToCart,\r\n    bookRemovedFromCart,\r\n    allBooksRemovedFromCart\r\n}","import React from 'react';\r\n\r\nconst {\r\n    Provider: BookstoreServiceProvider, \r\n    Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    BookstoreServiceProvider,\r\n    BookstoreServiceConsumer\r\n};","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n    return (props) => {\r\n        return (\r\n            <BookstoreServiceConsumer>\r\n                {\r\n                    (bookstoreService) => {\r\n                        return (<Wrapped {...props} bookstoreService={bookstoreService} />);\r\n                    }\r\n                }\r\n            </BookstoreServiceConsumer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withBookstoreService;","import React, {Component} from 'react';\r\nimport BookListItem from '../book-list-item';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport Spinner from '../spinner';\r\nimport ErrorIndicator from '../error-indicator'\r\nimport { fetchBooks, bookAddedToCart } from '../../actions';\r\n\r\nimport './book-list.css';\r\nimport { withBookstoreService } from '../hoc';\r\nimport { compose } from '../../utils';\r\n\r\nconst BookList = ( { books, onAddedToCart } ) => {\r\n    return (\r\n        <ul className='book-list'>\r\n            {\r\n                books.map((book) => {\r\n                    return (\r\n                        <li key={book.id}>\r\n                            <BookListItem book={ book } onAddedToCart={() => onAddedToCart(book.id)} />\r\n                        </li>\r\n                    )\r\n                })\r\n            }\r\n        </ul>\r\n    )\r\n};\r\n\r\nclass BookListContainer extends Component  {\r\n\r\n    componentDidMount() {\r\n        this.props.fetchBooks();        \r\n    }\r\n\r\n    render() {\r\n        const { books, loading, error, onAddedToCart } = this.props;\r\n        if (loading) {\r\n            return <Spinner />\r\n        }\r\n        if (error) {    \r\n            return <ErrorIndicator />\r\n        }\r\n        return < BookList books={books} onAddedToCart={onAddedToCart} />\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error }}) => {\r\n    return { books, loading, error };\r\n  };\r\n\r\nconst mapDispatchToProps = (dispatch,  { bookstoreService } ) => {\r\n    return bindActionCreators({\r\n        fetchBooks: fetchBooks(bookstoreService),\r\n        onAddedToCart: bookAddedToCart\r\n    }, dispatch)\r\n};\r\n\r\nexport default compose(\r\n    withBookstoreService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);\r\n\r\n","import BookList from './book-list';\r\n\r\nexport default BookList;","const compose = (...funcs) => (comp) => {\r\n    return funcs.reduceRight(\r\n        (weapped, f) => f(weapped), comp\r\n    );\r\n}\r\n\r\nexport {compose};","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport { bookAddedToCart, bookRemovedFromCart, allBooksRemovedFromCart } from '../../actions';\r\nimport './shopping-cart-table.css';\r\n\r\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n/* ================================================================================== */    \r\n    let summ = 0\r\n    let sumItems = 0;\r\n    for (let i = 0; i < items.length; i++) {\r\n        console.log(items[i].total);\r\n        summ += items[i].total\r\n        sumItems += items[i].count\r\n    }\r\n\r\n/* ================================================================================== */\r\n\r\n\r\n    const renderRow = (item, idx) => {\r\n        const { id, title, count, total } = item;\r\n        return (\r\n            <tr key={id}>\r\n                <td>{idx + 1}</td>\r\n                <td>{title}</td>\r\n                <td>{count}</td>\r\n                <td>${total}</td>\r\n                <td>\r\n                    <button \r\n                    onClick={() => onDelete(id)}\r\n                    className=\"btn btn-outline-danger btn-sm float-right\">\r\n                        <i className=\"fa fa-trash-o\" />\r\n                    </button>\r\n                    <button\r\n                    onClick={() => onIncrease(id)}\r\n                    className=\"btn btn-outline-success btn-sm float-right\">\r\n                        <i className=\"fa fa-plus-circle\" />\r\n                    </button>\r\n                    <button \r\n                    onClick={() => onDecrease(id)}\r\n                    className=\"btn btn-outline-warning btn-sm float-right\">\r\n                        <i className=\"fa fa-minus-circle\" />\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    };\r\n    \r\n    return (\r\n        <div className='shopping-cart-table'>\r\n            <h2>You Order</h2>\r\n            <table className='table'>\r\n                <thead>\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th>Item</th>\r\n                        <th>Count</th>\r\n                        <th>Price</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        items.map(renderRow)\r\n                    }\r\n                </tbody>\r\n            </table>\r\n            <div className='total'>\r\n                Total: ${summ}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal }}) => {\r\n    return {\r\n        items: cartItems,\r\n        total: orderTotal\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {    \r\n    onIncrease: bookAddedToCart,\r\n    onDecrease: bookRemovedFromCart,\r\n    onDelete: allBooksRemovedFromCart,\r\n\r\n}\r\n\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);","import ShoppingCartTable from './shopping-cart-table';\r\n\r\nexport default ShoppingCartTable;","import React from 'react';\r\nimport BookListContainer from '../book-list';\r\nimport ShoppingCartTable from '../shopping-cart-table'; \r\n\r\nconst HomePage = () => {\r\n    return (\r\n        <div>\r\n            <BookListContainer />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default HomePage;","import React from 'react';\r\nimport ShoppingCartTable from '../shopping-cart-table'; \r\n\r\nconst CartPage = () => {\r\n    return <ShoppingCartTable/>\r\n}\r\n\r\nexport default CartPage;","import ShopHeader from './shop-header';\r\n\r\nexport default ShopHeader;","import React from 'react';\r\nimport './shop-header.css';\r\nimport { Link } from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\n\r\nconst ShopHeader = ({items}) => {\r\n    let summ = 0\r\n    let sumItems = 0;\r\n    for (let i = 0; i < items.length; i++) {\r\n        console.log(items[i].total);\r\n        summ += items[i].total\r\n        sumItems += items[i].count\r\n    }\r\n    return (\r\n        <header className='shop-header row'>\r\n            <Link to='/BookStore/'>\r\n                <div className='logo text-dark' >BookStore</div>\r\n            </Link>\r\n\r\n            <Link className='hopping-cart-link' to='/BookStore/cart'>\r\n                <div className='shopping-cart'>\r\n                    <i className='cart-icon fa fa-shopping-cart'/>\r\n                    {sumItems} items (${summ})\r\n                </div>\r\n            </Link>\r\n        </header>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal }}) => {\r\n    return {\r\n        items: cartItems,\r\n        total: orderTotal\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);\r\n","import App from './app';\r\n\r\nexport default App;","import React from 'react';\r\nimport {Route, Switch} from 'react-router-dom';\r\nimport {HomePage, CartPage} from '../pages';\r\nimport ShopHeader from '../shop-header';\r\nimport './app.css';\r\n\r\nconst App = () => {\r\n    return (\r\n        <main role='main' className='container'>\r\n            <ShopHeader />\r\n            <Switch>\r\n                <Route\r\n                path='/BookStore/'\r\n                component={HomePage}\r\n                exact\r\n                />\r\n                <Route\r\n                path='/BookStore/cart'\r\n                component={CartPage}\r\n                />\r\n            </Switch>\r\n        </main>\r\n    )\r\n};\r\n\r\nexport default App;","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;","import React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n    state = {\r\n        hasError: false\r\n    }\r\n    \r\n    componentDidCatch(){\r\n        this.setState({ hasError: true })\r\n    }\r\n    render(){\r\n        if(this.state.hasError) {\r\n            return < ErrorIndicator/ >\r\n        } \r\n        return this.props.children;\r\n    }\r\n}","export default class BookstoreService {\r\n\r\n    data = [\r\n        {\r\n            id: '1', \r\n            title: \"And the Mountains Echoed\",\r\n            author: \"Khaled Hosseini\",\r\n            price: 8, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/0/6/0/3/9200000010223060.jpg'\r\n        }, \r\n        {\r\n            \r\n            id: '2', \r\n            title: \"Duizend schitterende zonnen\",\r\n            author: \"Khaled Hosseini\",\r\n            price: 16, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/7/3/5/1/1001004010981537.jpg'\r\n        },\r\n        {\r\n            id: '3', \r\n            title: \"Last Minute\",\r\n            author: \"Linda van Rijn\", \r\n            price: 4, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/2/5/6/7/1001004011817652.jpg'\r\n        }, \r\n        {\r\n            \r\n            id: '4', \r\n            title: \"Jarka Ruus\",\r\n            author: \"Terry Brooks\",\r\n            price: 18, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/7/8/9/9/1001004011269987.jpg'\r\n        },\r\n        {\r\n            id: '5', \r\n            title: \"Mag ik je nummer even?\",\r\n            author: \"Sophie Kinsella\",\r\n            price: 10, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/3/0/9/4/9200000009984903.jpg'\r\n        }, \r\n        {\r\n            \r\n            id: '6', \r\n            title: \"De aanslag\",\r\n            author: \"David Baldacci\",\r\n            price: 19, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/4/8/2/7/9200000010047284.jpg'\r\n        },\r\n        {\r\n            id: '7', \r\n            title: \"In One Person\",\r\n            author: \"John Irving\",\r\n            price: 25, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/3/4/5/9/9200000009409543.jpg'\r\n        }, \r\n        {\r\n            \r\n            id: '8', \r\n            title: \"De Tennisparty\",\r\n            author: \"Sophie Kinsella\", \r\n            price: 18, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/3/7/6/4/9200000009984673.jpg'\r\n        },\r\n        {\r\n            id: '9', \r\n            title: \"The Hit\",\r\n            author: \"David Baldacci\",\r\n            price: 21, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/6/5/2/3/9200000009123256.jpg'\r\n        }, \r\n        {      \r\n            id: '10', \r\n            title: \"In het hart\",\r\n            author: \"David Baldacci\",\r\n            price: 5, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/2/6/2/1/1001004005971262.jpg'\r\n        },\r\n        {\r\n            id: '11', \r\n            title: \"Inferno\",\r\n            author: \"Dan Brown\",\r\n            price: 17, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/8/9/9/9/9200000010839998.jpg'\r\n        }, \r\n        {\r\n            id: '12', \r\n            title: \"Hotel aan zee\",\r\n            author: \"Maeve Binchy\",\r\n            price: 14, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/7/2/1/0/9200000009850127.jpg'\r\n        },\r\n        {\r\n            id: '13', \r\n            title: \"Best of me\",\r\n            author: \"Nicholas Sparks\", \r\n            price: 13, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/4/6/2/8/9200000001208264.jpg'\r\n        }, \r\n        {\r\n            \r\n            id: '14', \r\n            title: \"The lucky one\",\r\n            author: \"Nicholas Sparks\",\r\n            price: 9, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/7/0/3/7/1001004011797307.jpg'\r\n        },\r\n        {\r\n            id: '15', \r\n            title: \"In een mens\",\r\n            author: \"John Irving\",\r\n            price: 19, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/0/7/8/7/9200000000037870.jpg'\r\n        }, \r\n        {\r\n            id: '16', \r\n            title: \"Hou je mond!\",\r\n            author: \"Sophie Kinsella\",\r\n            price: 10, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/8/3/1/6/1001004002056138.jpg'\r\n        },\r\n        {\r\n          id: '17', \r\n          title: \"De delta deceptie\",\r\n          author: \"Dan Brown\",\r\n          price: 14, \r\n          coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/5/0/5/5/1001004006225505.jpg'\r\n        }, \r\n        {\r\n            id: '18', \r\n            title: \"De Vliegeraar\",\r\n            author: \"Khaled Hosseini\",\r\n            price: 6, \r\n            coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/6/3/5/1/1001004010981536.jpg'\r\n        },\r\n        {\r\n          id: '19', \r\n          title: \"Winter Chalet\",\r\n          author: \"Linda van Rijn\",\r\n          price: 15, \r\n          coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/6/6/6/7/9200000002547666.jpg'\r\n        },\r\n        {\r\n          id: '20', \r\n          title: \"De wereld volgens Garp\",\r\n          author: \"John Irving\",\r\n          price: 19, \r\n          coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/6/3/6/7/1001004005997636.jpg'\r\n        },\r\n        {\r\n          id: '21', \r\n          title: \"Safe Haven\",\r\n          author: \"Nicholas Sparks\",\r\n          price: 33, \r\n          coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/0/5/2/3/9200000010683250.jpg'\r\n        },\r\n        {\r\n          id: '22', \r\n          title: \"Blue Curacao\",\r\n          author: \"Linda van Rijn\",\r\n          price: 48, \r\n          coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/0/9/4/2/9200000010732490.jpg'\r\n        },\r\n        {\r\n          id: '23', \r\n          title: \"A Week in Winter\",\r\n          author: \"Maeve Binchy\",\r\n          price: 11, \r\n          coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/6/2/8/0/9200000008070826.jpg'\r\n        },\r\n        {\r\n          id: '24', \r\n          title: \"Bloodfire Quest\",\r\n          author: \"Terry Brooks\",\r\n          price: 24, \r\n          coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/7/0/0/7/9200000009027007.jpg'\r\n        },\r\n        {\r\n          id: '25', \r\n          title: \"Magic staff\",\r\n          author: \"Terry Brooks\",\r\n          price: 17, \r\n          coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/2/2/5/2/9200000002212522.jpg'\r\n        },\r\n        {\r\n          id: '26', \r\n          title: \"Deception point\",\r\n          author: \"Dan Brown\",\r\n          price: 9, \r\n          coverImage: 'http://s.s-bol.com/imgbase0/imagebase/large/FC/8/8/9/8/1001004006878988.jpg'\r\n        }\r\n\r\n          ];\r\n\r\n    getBooks(){\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(()=>{\r\n                if(false) {\r\n                    reject(new Error('Somthing bad happend'))\r\n                } else {\r\n                    resolve(this.data);\r\n                }\r\n            }, 670)\r\n        });\r\n    }\r\n    \r\n}","const updateBookList = (state, action) => {\r\n\r\n    if (state === undefined) {\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n    }\r\n  \r\n    switch (action.type) {\r\n      case 'FETCH_BOOKS_REQUEST':\r\n        return {\r\n          books: [],\r\n          loading: true,\r\n          error: null\r\n        };\r\n  \r\n      case 'FETCH_BOOKS_SUCCESS':\r\n        return {\r\n          books: action.payload,\r\n          loading: false,\r\n          error: null\r\n        };\r\n  \r\n      case 'FETCH_BOOKS_FAILURE':\r\n        return {\r\n          books: [],\r\n          loading: false,\r\n          error: action.payload\r\n        };\r\n  \r\n      default:\r\n        return state.bookList;\r\n    }\r\n  };\r\n\r\n  export default updateBookList;","const updateCartItems = (cartItems, item, idx) => {\r\n\r\n    if (item.count === 0) {\r\n      return [\r\n        ...cartItems.slice(0, idx),\r\n        ...cartItems.slice(idx + 1)\r\n      ];\r\n    }\r\n  \r\n    if (idx === -1) {\r\n      return [\r\n        ...cartItems,\r\n        item\r\n      ];\r\n    }\r\n  \r\n    return [\r\n      ...cartItems.slice(0, idx),\r\n      item,\r\n      ...cartItems.slice(idx + 1)\r\n    ];\r\n  };\r\n  \r\n  const updateCartItem = (book, item = {}, quantity) => {\r\n  \r\n    const {\r\n      id = book.id,\r\n      count = 0,\r\n      title = book.title,\r\n      total = 0 } = item;\r\n  \r\n    return {\r\n      id,\r\n      title,\r\n      count: count + quantity,\r\n      total: total + quantity*book.price\r\n    };\r\n  };\r\n\r\n  const updateOrder = (state, bookId, quantity) => {\r\n    const { bookList: { books }, shoppingCart: { cartItems }} = state;\r\n  \r\n    const book = books.find(({id}) => id === bookId);\r\n    const itemIndex = cartItems.findIndex(({id}) => id === bookId);\r\n    const item = cartItems[itemIndex];\r\n\r\n    const newItem = updateCartItem(book, item, quantity);\r\n    return {\r\n      orderTotal: 0,\r\n      cartItems: updateCartItems(cartItems, newItem, itemIndex)\r\n    };\r\n  };\r\n\r\n  const updateShoppingCart = (state, action) => {\r\n\r\n   \r\n\r\n    if (state === undefined) {\r\n      return {\r\n        cartItems: [],\r\n        orderTotal: 0\r\n      }\r\n    }\r\n  \r\n    switch(action.type) {\r\n      case 'BOOK_ADDED_TO_CART':\r\n        return updateOrder(state, action.payload, 1);\r\n  \r\n      case 'BOOK_REMOVED_FROM_CART':\r\n        return updateOrder(state, action.payload, -1);\r\n  \r\n      case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n        const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\r\n        return updateOrder(state, action.payload, -item.count);\r\n  \r\n      default:\r\n        return state.shoppingCart;\r\n    }\r\n  };\r\n\r\n  export default updateShoppingCart;\r\n","import updateBookList from './book-list';\r\nimport updateShoppingCart from './shopping-cart';\r\n\r\n\r\nconst reducer = (state, action) => {\r\n    return { \r\n        bookList: updateBookList(state, action),\r\n        shoppingCart: updateShoppingCart(state, action)\r\n    }\r\n};\r\n\r\nexport default reducer;","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport reducer from './reducers';\r\n\r\nconst logMiddleware = (/* {getState} */) => (dispatch) => (action) => {\r\n    //console.log(action.type, getState())\r\n    return dispatch(action)\r\n}\r\n\r\nconst stringMiddleware = () => (dispatch) => (action)=> {\r\n        if (typeof action === 'string') {\r\n            return dispatch({\r\n                type: action\r\n            });\r\n        }\r\n        return dispatch(action);\r\n}\r\n\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware, stringMiddleware, logMiddleware));\r\n\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router} from 'react-router-dom';\r\n\r\nimport App from './components/app';\r\nimport ErrorBoundry from './components/error-boundry';\r\nimport BookstoreService from './sevices/bookstore-service';\r\nimport { BookstoreServiceProvider} from './components/bookstore-service-context';\r\n\r\nimport store from './store';\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n      <ErrorBoundry>\r\n          <BookstoreServiceProvider value={bookstoreService}>\r\n            <Router>\r\n                <App />\r\n            </Router>\r\n          </BookstoreServiceProvider>\r\n      </ErrorBoundry>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}